# Rento 环境配置模板
# 复制此文件为 .env 并根据需要修改配置
# 
# 快速开始：
# 1. cp .env.example .env
# 2. 修改必要的密码和密钥（见下方标记）
# 3. podman-compose up -d 或 docker-compose up -d

# ===========================================
# 🔧 基础配置
# ===========================================
NODE_ENV=production
PORT=3001
NEXTAUTH_URL=http://localhost:3001

# 🔑 必须修改：NextAuth 密钥（用于会话加密）
NEXTAUTH_SECRET=khTS9kBVbH8Gk+TkMv+mKWrRyuvEz9v8twk/TRSvI5A=

# ===========================================
# 🗄️ 数据库配置
# ===========================================
# 开发环境：使用 SQLite（取消注释下面一行，注释 PostgreSQL 配置）
# DATABASE_URL="file:./prisma/dev.db"

# 生产环境：使用 PostgreSQL（默认配置）
# 注意：如果密码包含特殊字符（如 '/'、'='、'@' 等），必须进行 URL 编码
# 例如：原始密码 'ZCHHYaFeRj1dB/8TCISlPA==' 编码为 'ZCHHYaFeRj1dB%2F8TCISlPA%3D%3D'
# 示例：
# DATABASE_URL=postgresql://rento:ZCHHYaFeRj1dB%2F8TCISlPA%3D%3D@postgres:5432/rento_production
DATABASE_URL=postgresql://rento:YOUR_PASSWORD@postgres:5432/rento_production

# PostgreSQL 容器配置
POSTGRES_DB=rento_production
POSTGRES_USER=rento
# 🔑 必须修改：数据库密码（与上面 DATABASE_URL 中的密码保持一致）
POSTGRES_PASSWORD=ZCHHYaFeRj1dB/8TCISlPA==

# ===========================================
# 📊 监控和日志
# ===========================================
ENABLE_MONITORING=true
PERFORMANCE_MONITORING=true
LOG_LEVEL=info

# ===========================================
# 🔒 安全配置
# ===========================================
ALLOWED_ORIGINS=http://localhost:3001
CORS_ENABLED=true
MAX_REQUEST_SIZE=10mb
REQUEST_TIMEOUT=30000

# ===========================================
# 📁 可选配置（通常不需要修改）
# ===========================================
# 容器名称前缀
# CONTAINER_PREFIX=rento

# 端口映射
# APP_PORT=3001
# POSTGRES_PORT=5432
# REDIS_PORT=6379

# 服务目录
BACKUP_DIR=/app/backups
LOG_DIR=/app/logs

# Redis 缓存
REDIS_URL=redis://redis:6379

# 网络端口（生产环境）
# HTTP_PORT=80
# HTTPS_PORT=443
# Podman（rootless）环境建议使用非特权端口：
# HTTP_PORT=8080
# HTTPS_PORT=8443

# ===========================================
# 📧 高级配置（可选，用于生产环境告警）
# ===========================================
# 邮件通知配置
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# ALERT_EMAIL=admin@your-domain.com

# SSL 证书路径（使用 Nginx 时）
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ===========================================
# 📝 配置说明
# ===========================================
# 
# 🚀 快速部署：
#   1. 复制配置：cp .env.example .env
#   2. 启动服务：podman-compose up -d
#   3. 数据迁移：podman exec -it rento-app /app/scripts/migrate-and-seed.sh
#   4. 访问应用：http://localhost:3001
# 
# 🔧 开发环境：
#   - 设置 NODE_ENV=development
#   - 使用 SQLite：DATABASE_URL="file:./prisma/dev.db"
#   - 关闭监控：ENABLE_MONITORING=false
# 
# 🌐 生产环境：
#   - 修改 NEXTAUTH_URL 为实际域名
#   - 修改 ALLOWED_ORIGINS 为实际域名
#   - 确保使用强密码和密钥
# 
# 🔐 安全提醒：
#   - NEXTAUTH_SECRET：用于会话加密，必须修改
#   - POSTGRES_PASSWORD：数据库密码，必须与 DATABASE_URL 中一致
#   - 生产环境请使用 HTTPS 和强密码